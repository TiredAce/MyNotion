# Part2 栈与队列

>[1. 栈](#1)
>
>[2. 单调栈](#2)
>
>[3. 队列](#3)
>
>[4. 单调队列](#4)
>
>[5. 习题](#5)

<h2 id = "1">
1. 栈的实现
</h2>

### 1.1 栈的定义

*栈（Stack）是一种只能在一端进入插入或删除操作的线性表。*表中允许进行插入、删除操作的一端称为*栈顶*，表的另一端称为*栈底*。栈顶的当前位置是动态的，栈顶的当前位置由一个被称为栈顶指针的位置指示器来指示。当栈中没有数据元素时称为*空栈*。栈的插入操作通常称为*进栈*或*入栈*，栈的删除操作通常称为*出栈*或*退栈*。

栈的主要特点是“后进先出”(Last In First Out, LIFO)。

栈的基本操作为*InitStack、DestroyStack、StackEmpty、Push、Pop、GetTop*。在算法竞赛中可能会为栈添加其他操作，这些在具体的题目中才能体现。

### 1.2 栈的实现

#### 1.2.1 顺序栈(sequential stack)

栈中数据元素的逻辑关系呈线性关系，所以可以像线性表一样存储。栈的元素个数最大不超过正整数`MaxSize`，所有的元素都具有同一数据类型，可用下列方法来声明顺序栈的类型`SqStack`：

```c++
typedef struct
{	ElemType data[MaxSize];   // 存放元素
	int top;                  // 栈顶指针
}SqStack;                     // 顺序栈类型
```

在顺序栈上对应栈的基本运算代码 [Code:1_2_1.cpp](./1_2_1.cpp)

所有的运算的时间复杂度为$O(1)$，因此栈的操作十分高效。

#### 1.2.2 链式栈（linked stack）

采用链式存储的存储结构叫做链栈。以下采用含有虚拟头节点的单链表来实现栈。

链栈的优点就是不存在栈满上溢的情况。规定栈的所有操作都是单链表的表头进行的，用下列方法来声明链栈的结点`LinkStNode`：

```c++
struct LinkStNode
{
    ElemType val;
    LinkStNode * next;
};
```

在顺序栈上对应栈的基本运算代码 [Code:1_2_2.cpp](./1_2_2.cpp)

### 1.3 栈的应用

#### 1.3.1 表达式求值

栈的一大用法就是用来做算数表达式的计算，算数表达式通常有前缀，后缀，中缀三种表示方法。

**中缀表达式**：最常见的表达式，例如 $3*(1-2)$

**前缀表达式**：又称波兰表达式，形如`op A B`，其中`op`是一个操作符，`A,B`分别是两个前缀表达式。

**后缀表达式**：又称逆波兰表达式，形如`A B op`。

前缀和后缀表达式的值的定义是，先递归求出`A,B`的值，二者再做`op`运算的结果。这两种表达式不需要使用括号，其运算方式唯一。计算机最容易理解后缀表达式，可以用栈$O(N)$处理。

1. 后缀表达式求值算法流程

`Step1`: 建立一个用于存数的栈，逐个扫描该后缀表达式的元素。遇到数，入栈；遇到操作符，就去除栈顶两个数计算，并把结果入栈。

`Step2`：扫描完成后，栈中恰好剩下一个数，就是该后缀表达式的值。

实现代码 [Code:1_3_1_1.cpp](./1_3_1_1.cpp)

2. 中缀表达式求值算法流程

`Step1`：建立一个用于存运算符的栈，逐一扫描该中缀表达式中的元素。如果遇到一个数，入栈；如果遇到左括号，入栈；如果遇到右括号，不断出栈，直到栈顶为左括号。左括号出栈；如果遇到运算符，**只要栈顶符号的优先级不低于新符号，就不断去除栈顶并输出**，最后把新符号进栈。

`Step2`：依次运算栈中所有剩余符号，最终留在栈中的数就是结果。

实现代码 [Code:1_3_1_2.cpp](./1_3_1_2.cpp)

3. 中缀表达式转后缀表达式算法流程

`Step1`：建立一个用于存运算符的栈，逐一扫描该中缀表达式中的元素。如果遇到一个数，入栈；如果遇到左括号，入栈；如果遇到右括号，不断出栈，直到栈顶为左括号。左括号出栈；如果遇到运算符，**只要栈顶符号的优先级不低于新符号，就不断去除栈顶并输出**，最后把新符号进栈。

`Step2`：依次取出并输出栈中所有剩余符号，最终输出的序列就是一个与原中缀表达式等价的后缀表达式。

实现代码 [Code:1_3_1_3.cpp](./1_3_1_3.cpp)

<h2 id = "2">
2. 单调栈
</h2>
单调栈算法，借助单调性处理问题的思想在于及时排除不可能的选项，保持策略集合的高度有序性和秩序性，从而做出策略提供更多条件。具体运用参考习题部分。


<h2 id = "3">
3. 队列
</h2>





<h2 id = "4">
4. 单调队列
</h2>





<h2 id = "5">
5. 习题
</h2>
