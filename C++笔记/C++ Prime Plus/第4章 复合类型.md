## 第4章 复合类型

### 4.1 数组

#### 4.1.3 C++11数组初始化方法

​		首先，初始化数组时，可以省略等号

```c++
double earings[4] {1, 2, 3, 4};
```

​		其次，可以不在大括号内包含的任何东西，表示将所有的元素都设置为零。

```c++
double earing[4] {};
```

​		最后，列表的初始化禁止缩窄转换。

```c++
long arr1[] = {25. 93. 1.0};             // no
char arr2[4] = {'h', 'i', 17772. '\0'};  // no
char arr3[4] = {'h', 'i', 17, '\0'};     // yes
```

### 4.2 字符串

#### 4.2.1 拼接字符串常量
​		以下赋值语句是等效的：
```c++
char name[20] = "abc"" efg";
char name[20] = "abc efg";
```
​		第一种方式为字符串常量的拼接，第一个字符串的`/0`字符将被第二个字符串的第一个字符取代。

#### 4.2.3 字符串输入

​		`cin`使用空白来确定字符串的结束位置，这意味着`cin`在获取字符数组输入时只读取一个单词。读取该单词后，`cin`将该字符串放到数组中，并自动在结尾添加空字符。另一个问题是，输入字符串可能比目标数组长。

#### 4.2.4 每次读取一行字符串

​		要将整条短语而不是一个单词作为字符串输入，需要采用另一种字符串读取方法。在`istream`中的类提供了一些面向行的类成员函数：`getline()`和`get()`。这两个函数都读取一行输入，直到到达换行符。然而，随后`getline()`将对其换行符，而`get()`将换行符保留在输入序列中。

##### 1. 面向行的输入： getline()

​		`getline()`函数读取整行，它使用通过回车键输入的换行符来确定输入结尾。要调用这种方法，可以使用`cin.getline()`。该函数有两个 参数。第一个参数是用来存储输入行的数组的名称，第二个参数是要读取的字符数。如果这个此参数为20，则这个函数最多读取19个字符，余下的空间用于存储自动在结尾处添加的空字符。`getline()`成员函数在读取指定数目的字符或遇到换行符时停止读取。

​		例如，假设要使用`getline()`将姓名读入到一个包含20个元素的`name`数组中。可以通过：

```c++
cin.getline(name, 20);
```

​		这将把一行读入到`name`数组中——如果这行包含的字符不超过19个。

##### 2. 面向行的输入：get()

​		`istream`类有另一个名为`get()`的成员函数，该函数有几种变体。其中一种变体的工作方式与`getline()`类似，它们接受的参数相同，解释参数的方式也相同，并且都去读到行尾。但`get`并不再读取并丢弃换行符，而是将其留在输入队列中。假设连续使用两次调用`get()`:

```c++
cin.get(name, 20);
cin.get(dessert, 20);     // a problem
```

​		第一次调用时，换行符留在输入队列中，因此第二次调用时，看到的第一个字符是换行符。因此`get()`认为已到达行尾，而没有发现任何可读取的内容。如果哦不借助帮助，`get()`将不能跨过该换行符。

​		可以通过`get()`的一种变体。使用不带任何参数的`cin.get()`调用可读取下一个字符，因此此可以用它来读取换行符，为读取下一行输入做好准备。

```c++
cin.get(name, 20);
cin.get(); 				 // read newline
cin.get(dessert, 20); 
```

