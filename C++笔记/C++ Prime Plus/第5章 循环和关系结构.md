## 第5章 循环和关系结构

>[5.5 循环和文本输入](#5.5)

<h3 id = "5.5">5.5 循环和文本输入</h3>

#### 5.5.2 使用cin.get(char)进行补救 

​		成员函数`cin.get(ch)`读取输入中的下一个字符（**即使它是空格**），并将其赋给变量`ch`。使用这个函数调用替换`cin >> ch `。

#### 5.5.4 文件尾条件

​		可以使用检测文件尾`EOF`。`C++`输入工具与操作系统协同工作，来检测文件尾并将这种信息告知程序。

​		检测到`EOF`后，`cin`将两位`eofbit`和`failbit`都设置为`1`。可以通过成员函数`eof()`来查看是否被设置；如果检测到`EOF`，则`cin.eof()`将返回`true`。

##### 1. 常见的字符输入做法

​		每次读取一个字符，直到遇到`EOF`的输入循环的基本设计如下：

```c++
cin.get(ch);
while (cin.fail() == false)
{
    . . .
    cin.get(ch);
}
```

​		方法`cin.get(char)`的返回值是一个`cin`对象。然而，`istream`对象转换为`bool`值的函数；当`cin`出现在需要`bool`值的地方时，该转换函数将被调用。另外，如果最后一次读取成功了，则转换得到的`bool`值为`true`；否则为`false`。这意味着可以使用如下循环：

```c++
while (cin)
```

​		最后，由于`cin.get(char)`的返回值为`cin`，因此可以将循环精简成这样格式：

```c++
while (cin.get(ch))
{
    . . .         // do stuff;
}
```

#### 5.5.5 另一种cin.get()版本

​		不接受任何参数的`cin.get()`成员函数返回输入中的下一个字符。也就是说，可以这样使用它：

```c++
ch = cin.get();
```

​		该函数的工作方式与`getchar()`类似，将字符编码作为`int`值返回；而`cin.get(ch)`返回一个对象，而不是读取的字符。同时可以使用`cout.put()`函数来显示字符：

```c++
cout.put(ch);
```

​		为成功的使用`cin.get()`，需要直到其如何处理`EOF`条件。当该函数到达`EOF`时，将没有可返回的字符。相反，`cin.get()`将返回一个用符号常量`EOF`表示的特殊值。该常量是在头文件`iostream`中定义的。通常，`EOF`被定义为值`-1`。因为没有`ASCII`码`-1`的字符，但并不需要知道实际的值，而只需要在程序中使用`EOF`即可。
